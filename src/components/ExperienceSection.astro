---
import ResumeSection from "./ResumeSection.astro";
import Badge from "./Badge.astro";

interface Role {
  name: string;
  start: string;
  end?: string;
}

interface Experience {
  heading: string;
  roles: Role[];
  badges: string[];
  responsibilities: string[];
  location?: string;
}

const professionalExperience: Experience[] = [
  {
    heading: "DMG MORI Heitec Digital Ltd.",
    roles: [
      {
        name: "Senior Software Engineer",
        start: "2022",
      },
      {
        name: "Software Engineer",
        start: "2020",
        end: "2022",
      },
    ],
    badges: [
      "C++",
      "Go",
      "NATS",
      "gRPC",
      "OPC UA",
      "MQTT",
      "REST",
      "OpenAPI",
      "Google Protocol Buffers",
      "Google Test",
      "Google Mock",
      "Microsoft Azure",
      "Docker",
    ],
    responsibilities: [
	  `Maintaining Industry 4.0 cloud backend services in C++ and Go for the CELOS X SaaS product, utilizing Microsoft Azure IoT Edge and Publish-Subscribe messaging (NATS).`,
	  `Delivering feature components that forward raw PLC/NC machine data (Siemens, Heidenhain, MAPPS) to client systems relying on various industrial communication methods (OPC-UA, MTConnect, MQTT).`,
	  `Conducting interviews, onboarding support for new colleagues, mentoring, wiki maintenance`
    ],
    location: "Budapest",
  },
  {
    heading: "Freelance Embedded Developer",
    roles: [
      {
        name: "ME Embedded Ltd.",
        start: "February 2019",
        end: "June 2019",
      },
    ],
    badges: ["C++", "Raspberry Pi", "Qt", "QML", "MQTT"],
    responsibilities: [
      `Delivered an embedded Qt/QML UI application for a medical equipment's Raspberry Pi touch screen device while also forwarding machine state with UART to an MQTT messaging server.`
    ],
  },
  {
    heading: "evosoft Hungary Ltd.",
    roles: [
      {
        name: "Senior Software Engineer",
        start: "2018",
        end: "2020",
      },
      {
        name: "Software Engineer",
        start: "2017",
        end: "2018",
      },
      {
        name: "Junior Software Engineer",
        start: "January 2017",
        end: "November 2017",
      },
    ],
    badges: [
      "C++",
      "Qt",
      "Google Test",
      "Google Mock",
      "Win32 API",
      "Python",
      "Bash",
      "Perl",
      "Tcl",
    ],
    responsibilities: [
      `Delivered embedded diagnostics functionality for the Siemens SINUMERIK
      CNC controller in C++14, along with designing and implementing an
      analytic desktop Qt application to improve the debugging work of Siemens
      engineers. Designed plugin architecture for the analytic application.`,
      `Refactored legacy testing framework to BDD tests, reducing test
      maintenance effort by 70%.`,
      `Took responsibility in improving the workflow processes and introduced tools to the team.`,
      `Maintained in-house tooling and automation scripts.`,
    ],
    location: "Budapest",
  },
  {
    heading: "GE Healthcare",
    roles: [
      {
        name: "Software Intern",
        start: "2015",
        end: "2016",
      },
    ],
    badges: [
      "Java",
      "Spring Boot",
      "REST",
      "RabbitMQ",
      "Redis",
      "Cloud Foundry",
      "Docker",
      "JUnit",
      "Mockito",
      "JBehave",
      "Selenium",
    ],
    responsibilities: [
      `Maintained cloud backend microservices in Java using Spring Framework
      for a medical imaging SaaS product within the Predix platform, working
        with DICOM medical protocol in the process.`,
      `Member of the division's "DevOps Guild", shared Docker best practices.`,
    ],
    location: "Budapest",
  },
  {
    heading: "University of West Hungary",
    roles: [
      {
        name: "Research Software Developer",
        start: "2013",
        end: "2015",
      },
    ],
    badges: [
      "Java",
      "R",
      "RapidMiner",
      "Apache Tomcat",
      "MongoDB",
      "VMware ESXi",
    ],
    responsibilities: [
      `Develivered a data analytic plugin (multivariate regression) in R and
      Java for a data science framework used in the 25294/207
      T√ÅMOP-4.2.2.C-11/1/KONV-2012-0015 Earth-system research project.`,
      `Presented my research work on multiple conferences and was co-author in
      the publications.`,
      `Administered a virtual web server running in the cloud, supporting
      multiple members of the research project.`,
    ],
    location: "Sopron",
  },
];
---

<ResumeSection id="experience" title="Professional experience">
  {
    professionalExperience.map((experience) => (
      <div class="border-solid rounded-lg border-2 p-4 mb-8">
        <h3 class="">{experience.heading}</h3>
        <div class="col-span-2 text-gray-500 mb-2">{experience.location}</div>
        <div class="flex flex-col sm:grid grid-cols-12 gap-2 sm:gap-4">
          {experience.roles.map((role) => (
            <>
              {/* TODO: Code duplication */}
              <div class="hidden sm:block pt-1 col-span-2 font-bold">
                {role.start} - {role.end ? role.end : "Present"}
              </div>
              <div class="col-span-10">
                <h4>{role.name}</h4>
              </div>
              <div class="block sm:hidden pt-1 col-span-2 font-bold">
                {role.start} - {role.end ? role.end : "Present"}
              </div>
            </>
          ))}
          <div class="col-span-10">
            <div />
            <div>
              <ul class="flex flex-col divide-y">
                {experience.responsibilities.map((responsibility) => (
                  <li class="p-2">{responsibility}</li>
                ))}
              </ul>
            </div>
          </div>
          <div class="col-span-2" />
          {experience.badges && (
            <div class="col-span-10">
              <div>
                <p>
                  {experience.badges.map((badge) => (
                    <Badge>{badge}</Badge>
                  ))}
                </p>
              </div>
            </div>
          )}
        </div>
      </div>
    ))
  }
</ResumeSection>
